<ion-view hide-back-button="false" title="{{registroEgreso.bodega.bodega}} - Nueva orden de Egreso" hide-nav-bar="false">
    <ion-content>
        <div class="padding">
            <form name="formEgreso" ng-submit="console.log(registroEgreso.registro)">
                <div class="list">
                    <div class="item item-divider">
                        Datos de Egreso
                    </div>
                    <label class="item item-input item-select">
                        <div class="input-label">
                            Trabajador
                        </div>
                        <select ng-model="registroEgreso.registro.trabajadores_idTrabajador" required>
                            <option value="{{trabajador.idTrabajador}}" ng-repeat="trabajador in registroEgreso.trabajadores">{{trabajador.nombre}}</option>
                        </select>
                    </label>
                    <label class="item item-input item-floating-label">
                        <span class="input-label">N# de orden de compra</span>
                        <input ng-model="registroEgreso.registro.orden" type="text" placeholder="N# de orden de compra">
                    </label>  
                    <div class="item item-divider" ng-repeat-start="producto in registroEgreso.registro.egreso">
                        Producto #{{$index + 1}}
                    </div>
                    <label class="item item-input item-select">
                        <div class="input-label">
                            Producto
                        </div>
                        <select ng-model="producto.productos_idProducto">
                            <option value="{{producto.idProducto}}" ng-repeat="producto in registroEgreso.productos">{{producto.nombreProducto}}</option>
                        </select>
                    </label>
                    <label class="item item-input item-floating-label" ng-repeat-end>
                        <span class="input-label">Cantidad</span>
                        <input ng-model="producto.cantidad" type="text" placeholder="Cantidad">
                    </label>
                    <button class="button button-block button-energized" ng-click="registroEgreso.registro.egreso.push({tipo: 'egreso', bodegas_idBodega: registroEgreso.bodega.idBodega})">
                        Agregar Producto
                    </button>
                </div>
                <button class="button button-block button-positive" type="submit">
                    Registrar
                </button>
            </form>
        </div>
    </ion-content>
</ion-view>
